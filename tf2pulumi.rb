# This file was generated by GoReleaser. DO NOT EDIT.
class Tf2pulumi < Formula
  desc "A tool to convert Terraform projects to Pulumi TypeScript programs"
  homepage "pulumi.io"
  version "0.10.0"
  bottle :unneeded

  head do
    url "https://github.com/pulumi/tf2pulumi.git"
    depends_on "go@1.13" if build.head?
  end

  if OS.mac?
    url "https://github.com/pulumi/tf2pulumi/releases/download/v0.10.0/tf2pulumi-v0.10.0-darwin-x64.tar.gz"
    sha256 "a5c3d6310ac987fd963f0aaff33fd01b99387bd05e5387b0da3b2208059ddcd8"
  elsif OS.linux?
    if Hardware::CPU.intel?
      url "https://github.com/pulumi/tf2pulumi/releases/download/v0.10.0/tf2pulumi-v0.10.0-linux-x64.tar.gz"
      sha256 "10b5176363fcaa2e17b04b770f250a2afee1eb598a6dc13c463aec1cd8a1a3a6"
    end
  end

  def install

    if build.head?
      ENV["GOPATH"] = buildpath
      ENV["GO111MODULE"] = "on"
      dir = buildpath/"src/github.com/pulumi/tf2pulumi"
      dir.install buildpath.children
      system "go", "build", "-ldflags=-X github.com/pulumi/tf2pulumi/version.Version=#{version}", "github.com/pulumi/tf2pulumi"
      bin.install Dir["#{buildpath}/tf2pulumi"]
    end

    if build.stable?
      bin.install "tf2pulumi"
    end

  end
end
